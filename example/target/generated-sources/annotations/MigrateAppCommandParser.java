// Generated by CLI-Gen annotation processorDO NOT EDIT - changes will be overwritten
import com.github.asm0dey.cligen.runtime.CommandParser;
import com.github.asm0dey.cligen.runtime.ParseException;
import com.github.asm0dey.cligen.runtime.ParseResult;
import java.lang.Override;
import java.lang.String;
import java.util.ArrayList;
import java.util.List;

/**
 * Generated parser for @Command: migrate
 * Generated at compile time - zero runtime reflection
 */
public class MigrateAppCommandParser implements CommandParser<MigrateApp> {
  @Override
  public ParseResult<MigrateApp> parse(String[] args) throws ParseException {
    MigrateApp instance = new MigrateApp();
    List remainingArgs = new ArrayList<>();
    int idx = 0;
    int posIdx = 0;
    while (idx < args.length) {
      String arg = args[idx];
      if (arg.equals("--port")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option --port requires an argument");
        }
        instance.dbPort = Integer.parseInt(args[idx + 1]);
        idx++;
        idx++;
      } else if (arg.equals("--dry-run")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option --dry-run requires an argument");
        }
        instance.dryRun = Boolean.parseBoolean(args[idx + 1]);
        idx++;
        idx++;
      } else if (arg.equals("-U") || arg.equals("--user")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -U requires an argument");
        }
        instance.dbUser = args[idx + 1];
        idx++;
        idx++;
      } else if (arg.equals("-H") || arg.equals("--host")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -H requires an argument");
        }
        instance.dbHost = args[idx + 1];
        idx++;
        idx++;
      } else if (arg.equals("-P") || arg.equals("--password")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -P requires an argument");
        }
        instance.dbPassword = args[idx + 1];
        idx++;
        idx++;
      } else if (!arg.startsWith("-")) {
        if (posIdx == 0) {
          instance.command = arg;
        } else if (posIdx == 1) {
          instance.targetVersion = arg;
        } else {
          remainingArgs.add(arg);
        }
        posIdx++;
        idx++;
      } else {
        throw new ParseException("Unknown option: " + arg);
      }
    }
    if (instance.dbUser == null) {
      throw new ParseException("Required option not provided: -U");
    }
    if (instance.dbHost == null) {
      throw new ParseException("Required option not provided: -H");
    }
    if (instance.command == null) {
      throw new ParseException("Required parameter not provided: command");
    }
    return new ParseResult<>(instance, remainingArgs);
  }

  @Override
  public String getHelpText() {
    return "migrate - Database migration utility\n"
            + "\n"
            + "Usage: migrate [PARAMETERS] [OPTIONS]\n"
            + "\n"
            + "Parameters:\n"
            + "  command\tMigration command (up, down, status)\n"
            + "  targetVersion\tTarget version (optional)\n"
            + "\n"
            + "Options:\n"
            + "  --port\tDatabase port (default: 5432)\n"
            + "  --dry-run\tShow what would be executed without executing\n"
            + "  -U, --user\tDatabase user\n"
            + "  -H, --host\tDatabase host\n"
            + "  -P, --password\tDatabase password\n"
            + "\n";
  }
}
