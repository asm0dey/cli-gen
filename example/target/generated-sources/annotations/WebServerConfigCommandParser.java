// Generated by CLI-Gen annotation processorDO NOT EDIT - changes will be overwritten
import com.github.asm0dey.cligen.runtime.CommandParser;
import com.github.asm0dey.cligen.runtime.ParseException;
import com.github.asm0dey.cligen.runtime.ParseResult;
import java.lang.Override;
import java.lang.String;
import java.util.ArrayList;
import java.util.List;

/**
 * Generated parser for @Command: webserver
 * Generated at compile time - zero runtime reflection
 */
public class WebServerConfigCommandParser implements CommandParser<WebServerConfig> {
  @Override
  public ParseResult<WebServerConfig> parse(String[] args) throws ParseException {
    WebServerConfig instance = new WebServerConfig();
    List remainingArgs = new ArrayList<>();
    int idx = 0;
    int posIdx = 0;
    while (idx < args.length) {
      String arg = args[idx];
      if (arg.equals("-d") || arg.equals("--debug")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -d requires an argument");
        }
        instance.debug = Boolean.parseBoolean(args[idx + 1]);
        idx++;
        idx++;
      } else if (arg.equals("-p") || arg.equals("--port")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -p requires an argument");
        }
        instance.port = Integer.parseInt(args[idx + 1]);
        idx++;
        idx++;
      } else if (arg.equals("-h") || arg.equals("--host")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -h requires an argument");
        }
        instance.host = args[idx + 1];
        idx++;
        idx++;
      } else if (arg.equals("-t") || arg.equals("--threads")) {
        if (idx + 1 >= args.length) {
          throw new ParseException("Option -t requires an argument");
        }
        instance.threads = Integer.parseInt(args[idx + 1]);
        idx++;
        idx++;
      } else if (!arg.startsWith("-")) {
        if (posIdx == 0) {
          instance.docRoot = arg;
        } else {
          remainingArgs.add(arg);
        }
        posIdx++;
        idx++;
      } else {
        throw new ParseException("Unknown option: " + arg);
      }
    }
    if (instance.docRoot == null) {
      throw new ParseException("Required parameter not provided: docRoot");
    }
    return new ParseResult<>(instance, remainingArgs);
  }

  @Override
  public String getHelpText() {
    return "webserver - Lightweight web server\n"
            + "\n"
            + "Usage: webserver [PARAMETERS] [OPTIONS]\n"
            + "\n"
            + "Parameters:\n"
            + "  docRoot\tDocument root directory\n"
            + "\n"
            + "Options:\n"
            + "  -d, --debug\tEnable debug logging\n"
            + "  -p, --port\tServer port (default: 8080)\n"
            + "  -h, --host\tBind address\n"
            + "  -t, --threads\tWorker threads\n"
            + "\n";
  }
}
